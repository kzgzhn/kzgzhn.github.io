{"version":3,"sources":["helpers/kaspi-types.js","helpers/number-format.js","GroupListItem.jsx","helpers/plural.js","UploadButton.jsx","helpers/kaspi-parse2.js","GroupListChart.js","Summary.jsx","GroupList.jsx","GroupItem.jsx","GroupItemChart.jsx","Group.jsx","App.js","reportWebVitals.js","index.js"],"names":["kaspiTypes","numberFormat","int","Intl","NumberFormat","format","replace","GroupListItem","item","setGroup","console","log","typeName","name","count","n","className","onClick","types","map","type","index","parseInt","sum","sum2","UploadButton","setData","dataExists","parsePdf","rawData","a","pdfjsLib","promise","pdf","Promise","all","Array","numPages","keys","num","getPage","page","getTextContent","pages","pagesGroupByLine","Object","values","items","reduce","rv","x","v","transform","push","str","trim","data","flat","length","shift","filter","match","date","Date","descrRaw","descrWithoutMiddleName","sumParse","raw","parseFloat","descr","inputFile","useRef","useEffect","f","current","click","document","addEventListener","removeEventListener","ref","accept","style","display","onChange","e","file","target","files","fr","FileReader","onload","Uint8Array","result","readAsArrayBuffer","workerSrc","PDFJSWorker","kaspiData2","json2","minDate","maxDate","data2","_sum","_sum2","forEach","key","plus","minus","_types","id","create","slice","sort","b","GroupListChart","monthsList","_minDate","setDate","_maxDate","setMonth","getMonth","chartX","toISOString","chartListPlus","chartListMinus","chartListPlus2","toFixed","chartListMinus2","series","some","label","show","position","rotate","showBackground","backgroundStyle","color","emphasis","focus","echarts","setOption","xAxis","axisLabel","interval","yAxis","height","Summary","dateFormatter","DateTimeFormat","year","month","day","GroupList","useState","setItems","setMaxDate","setMinDate","setSum","setSum2","_data","GroupItem","toLocaleDateString","GroupItemChart","Group","group","resetGroup","esc","keyCode","body","overflow","toLocaleString","App","dispatchEvent","Event","GridComponent","BarChart","CanvasRenderer","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.30268777.chunk.js","sourcesContent":["export const kaspiTypes = {\n    'Покупка': [\n        'покупка',\n        'покупки',\n        'покупок',\n    ],\n    'Перевод': [\n        'перевод',\n        'перевода',\n        'переводов',\n    ],\n    'Пополнение': [\n        'пополнение',\n        'пополнения',\n        'пополнений',\n    ],\n    'Снятие': [\n        'снятие',\n        'снятия',\n        'снятий',\n    ],\n}","\nexport const numberFormat = int => new Intl.NumberFormat('kz').format(int).replace(',', '.');\n","import {plural} from \"./helpers/plural\";\nimport {kaspiTypes} from \"./helpers/kaspi-types\";\nimport {numberFormat} from \"./helpers/number-format\";\n\nexport default function GroupListItem({item, setGroup}) {\n\n    console.log('GroupListItem.js: render');\n\n    const typeName = (name, count) => {\n        return (kaspiTypes[name] ? plural(kaspiTypes[name], count) : name);\n    };\n\n    return (\n        <div\n            className=\"border-t border-b sm:border-l sm:border-r sm:rounded bg-white px-3 py-2 flex justify-between cursor-pointer h-20\"\n            onClick={() => setGroup(item)}>\n            <div className=\"flex items-center justify-center\">\n                <div>\n                    <h3>{item.name}</h3>\n                    <div className=\"text-sm text-gray-500 mt-1\">\n                        {item.types ? item.types.map((type, index) =>\n                            <span key={type.name}>\n                                {index ? ', ' : ''} {type.count} {typeName(type.name, type.count)}\n                            </span>\n                        ) : ''}\n                    </div>\n                </div>\n            </div>\n            <div className=\"flex flex-col justify-center\">\n                <span className=\"block text-right\">\n                    {parseInt(item.sum) ? numberFormat(item.sum) : ''}\n                </span>\n                {\n                    parseInt(item.sum2)\n                        ? <span className=\"block text-right text-green-500 mt-1\">+{numberFormat(item.sum2)}</span>\n                        : ''\n                }\n            </div>\n        </div>\n    );\n}\n","export function plural(forms, n) {\n    let idx;\n    if (n % 10 === 1 && n % 100 !== 11) {\n        idx = 0; // many\n    } else if (n % 10 >= 2 && n % 10 <= 4 && (n % 100 < 10 || n % 100 >= 20)) {\n        idx = 1; // few\n    } else {\n        idx = 2; // one\n    }\n    return forms[idx] || '';\n}","import {useEffect, useRef} from \"react\";\n\nimport * as pdfjsLib from 'pdfjs-dist/legacy/build/pdf'\nimport PDFJSWorker from 'pdfjs-dist/legacy/build/pdf.worker.entry'\n\npdfjsLib.GlobalWorkerOptions.workerSrc = PDFJSWorker\n\nexport default function UploadButton({setData, dataExists}) {\n\n    console.log('UploadButton.js: render');\n\n    const parsePdf = async rawData => {\n        const pdf = await pdfjsLib.getDocument(rawData).promise;\n\n        const pages = await Promise.all([...Array(pdf.numPages).keys()].map(async num => {\n            const page = await pdf.getPage(num + 1);\n            return await page.getTextContent();\n        }));\n\n        const pagesGroupByLine = pages.map(item => {\n            const groupBy = function (xs) {\n                return xs.reduce(function (rv, x) {\n                    let v = x.transform[5];\n                    (rv[v] = rv[v] || []).push(x.str.trim());\n                    return rv;\n                }, {});\n            };\n            return Object.values(groupBy(item.items));\n        });\n\n        let data = pagesGroupByLine.flat();\n\n        data = data.map(item => {\n            if (item.length === 8) {\n                item.shift();\n            }\n            return item;\n        });\n\n        data = data.filter(item => {\n            return item.length === 7 && `${item[0]}`.match(/^\\d{2}\\.\\d{2}\\.\\d{2}$/);\n        });\n\n\n        data = data.map(item => {\n            let date = new Date(item[0].replace(/(\\d{2})\\.(\\d{2})\\.(\\d{2})/, '20$3-$2-$1'));\n            let sum = item[2];\n            let type = item[4];\n            let descrRaw = item[6].replace('  ', ' ');\n            let descrWithoutMiddleName = descrRaw.replace(/^([^ ]+) [^ ]+ ([^ ]+\\.)$/, '$1 $2');\n\n            let sumParse = sum.match(/^(\\+|-) (.*?) ₸$/);\n\n            sum = {\n                raw: sum,\n                type: sumParse[1],\n                sum: parseFloat(sumParse[2].replace(' ', '').replace(',', '.')),\n            }\n\n            return {\n                date,\n                sum,\n                type,\n                descr: descrWithoutMiddleName,\n                descrRaw,\n            };\n        });\n\n        setData(data);\n    }\n\n    const handleFileUpload = e => {\n        const file = e.target.files[0];\n        if (!file) {\n            return;\n        }\n        const fr = new FileReader();\n        fr.onload = e => parsePdf(new Uint8Array(e.target.result));\n        fr.readAsArrayBuffer(file)\n    }\n\n    const inputFile = useRef();\n\n    useEffect(() => {\n        const f = () => {\n            inputFile.current.click()\n        }\n        document.addEventListener(\"open-upload-dialog\", f, false);\n        return () => {\n            document.removeEventListener(\"open-upload-dialog\", f, false);\n        }\n    }, []);\n\n    return (\n        <div className={dataExists ? '' : 'hidden'}>\n            <button\n                type=\"button\"\n                className=\"border bg-blue-500 hover:bg-blue-400 text-white py-2 px-3 rounded shadow\"\n                onClick={() => inputFile.current.click()}\n            >\n                {dataExists ? 'Загрузить новую выписку' : 'Загрузить выписку'}\n            </button>\n            <input\n                type=\"file\"\n                ref={inputFile}\n                accept=\".pdf\"\n                style={{display: \"none\"}}\n                onChange={handleFileUpload}\n            />\n        </div>\n    );\n}","export const kaspiData2 = (json2) => {\n\n    if(!json2) {\n        return {\n            items: null,\n            minDate: null,\n            maxDate: null,\n            sum: null,\n            sum2: null\n        }\n    }\n\n    const groupBy = function (xs) {\n        return xs.reduce(function (rv, x) {\n            let v = '_' + x.descr;\n            (rv[v] = rv[v] || []).push(x);\n            return rv;\n        }, {});\n    };\n\n    let data2 = groupBy(json2);\n\n    let data = [];\n    const create = (id, name, sum, sum2, types) => data.push({id, name, sum, sum2, types})\n\n    let minDate, maxDate;\n    let _sum = 0;\n    let _sum2 = 0;\n\n    Object.keys(data2).forEach((key) => {\n        let plus = 0;\n        let minus = 0;\n        const _types = {};\n\n        data2[key].forEach((item) => {\n            if (item.sum.type === '-') {\n                minus += item.sum.sum;\n            }\n\n            if (item.sum.type === '+') {\n                plus += item.sum.sum;\n            }\n\n            //\n            if (!_types[item.type]) {\n                _types[item.type] = 0\n            }\n            ++_types[item.type];\n\n\n            // min/max dates\n            if (!minDate || minDate > item.date) {\n                minDate = item.date;\n            }\n\n            if (!maxDate || maxDate < item.date) {\n                maxDate = item.date;\n            }\n        });\n\n        //\n        const types = Object.keys(_types).map(key => {\n            return {\n                name: key,\n                count: _types[key],\n            }\n        })\n\n        _sum += plus;\n        _sum2 += minus;\n\n        create(key, key.slice(1), minus, plus, types);\n    });\n\n    function compare(a, b) {\n        if (a.sum > b.sum) {\n            return -1;\n        }\n        if (a.sum < b.sum) {\n            return 1;\n        }\n        if (a.sum2 > b.sum2) {\n            return -1;\n        }\n        if (a.sum2 < b.sum2) {\n            return 1;\n        }\n        return 0;\n    }\n\n    data = data.sort(compare);\n\n    return {\n        items: data,\n        minDate,\n        maxDate,\n        sum: _sum,\n        sum2: _sum2\n    }\n}\n","import {useEffect, useRef} from \"react\";\n\nimport * as echarts from 'echarts/core';\nimport {GridComponent} from 'echarts/components';\nimport {BarChart} from 'echarts/charts';\nimport {CanvasRenderer} from 'echarts/renderers';\n\necharts.use([GridComponent, BarChart, CanvasRenderer]);\n\nexport default function GroupListChart({items}) {\n    console.log('GroupListChart.js: render');\n\n    const ref = useRef();\n\n    useEffect(() => {\n        if (items && ref.current) {\n\n            let maxDate, minDate;\n            items.forEach(item => {\n\n                if (!maxDate || maxDate < item.date) {\n                    maxDate = item.date;\n                }\n                if (!minDate || minDate > item.date) {\n                    minDate = item.date;\n                }\n\n            })\n\n            const monthsList = [];\n\n            const _minDate = new Date(minDate);\n            _minDate.setDate(1);\n            const _maxDate = new Date(maxDate);\n            _maxDate.setDate(1);\n\n            for (; _minDate <= _maxDate; _minDate.setMonth(_minDate.getMonth() + 1)) {\n                monthsList.push(new Date(_minDate));\n            }\n\n            const chartX = [];\n\n            monthsList.forEach(date => {\n                chartX.push(date.toISOString().slice(0, 7));\n            })\n\n            const chartListPlus = [];\n            const chartListMinus = [];\n\n            chartX.forEach((date, index) => {\n                items.forEach(item => {\n\n                    if (date === item.date.toISOString().slice(0, 7)) {\n                        if (!chartListPlus[index]) {\n                            chartListPlus[index] = 0;\n                        }\n\n                        if (!chartListMinus[index]) {\n                            chartListMinus[index] = 0;\n                        }\n\n                        if (item.sum.type === '+') {\n                            chartListPlus[index] += item.sum.sum;\n                        }\n\n                        if (item.sum.type === '-') {\n                            chartListMinus[index] += item.sum.sum;\n                        }\n                    }\n                });\n            });\n\n            const chartListPlus2 = chartListPlus.map(item => {\n                return item === 0 ? '' : item.toFixed(2).replace('.00', '');\n            })\n            const chartListMinus2 = chartListMinus.map(item => {\n                return item === 0 ? '' : item.toFixed(2).replace('.00', '');\n            })\n\n            const series = [];\n\n\n            if (chartListMinus2.some(item => item)) {\n                series.push(\n                    {\n                        data: chartListMinus2,\n                        type: 'bar',\n                        label: {\n                            show: true,\n                            position: 'inside',\n                            rotate: 90,\n                        },\n                        showBackground: true,\n                        backgroundStyle: {\n                            color: 'rgba(180, 180, 180, 0.2)',\n                        },\n                        emphasis: {\n                            focus: 'series'\n                        },\n                    }\n                );\n            }\n\n            if (chartListPlus2.some(item => item)) {\n                series.push(\n                    {\n                        data: chartListPlus2,\n                        type: 'bar',\n                        label: {\n                            show: true,\n                            position: 'inside',\n                            rotate: 90,\n                        },\n\n                        showBackground: true,\n                        backgroundStyle: {\n                            color: 'rgba(180, 180, 180, 0.2)'\n                        },\n\n                        emphasis: {\n                            focus: 'series'\n                        },\n                    }\n                );\n            }\n\n\n            // Draw the chart\n            echarts.init(ref.current).setOption({\n                xAxis: {\n                    type: 'category',\n                    data: chartX,\n                    axisLabel: {interval: 0, rotate: 30}\n                },\n                yAxis: {\n                    type: 'value',\n                },\n                series\n            });\n        }\n\n        return () => {\n        }\n    }, [items]);\n\n    return (\n        <div className=\"-mt-8 px-3 sm:px-0 overflow-x-scroll\">\n            <div\n                ref={ref}\n                style={{height: '400px'}}/>\n        </div>\n    );\n};\n","import React from 'react';\nimport {numberFormat} from \"./helpers/number-format\";\n\nexport default function Summary({minDate, maxDate, sum, sum2}) {\n    const dateFormatter = date => new Intl.DateTimeFormat(\"ru\", {\n        year: \"numeric\",\n        month: \"long\",\n        day: \"numeric\"\n    }).format(date);\n\n    return (\n        <div className=\"px-3 sm:px-0\">\n            <span>\n                С{' ' + dateFormatter(minDate).replace(' ', ' ') + ' '}\n                по{' ' + dateFormatter(maxDate).replace(' ', ' ') + ' '}\n            </span>\n            {sum2 ? ' расходы составили ' + numberFormat(sum2) + ' тенге' : ''}\n            {sum ? ', доходы ' + numberFormat(sum) + ' тенге' : ''}\n            {sum || sum2 ? '.' : ''}\n        </div>\n    );\n};\n","import {useEffect, useState} from \"react\";\n\nimport GroupListItem from \"./GroupListItem\";\nimport UploadButton from \"./UploadButton\";\nimport {kaspiData2} from \"./helpers/kaspi-parse2\";\nimport GroupListChart from \"./GroupListChart\";\nimport Summary from \"./Summary\";\n\nexport default function GroupList({setGroup, data, setData}) {\n\n    console.log('GroupList.js: render');\n\n    const [items, setItems] = useState();\n    const [maxDate, setMaxDate] = useState();\n    const [minDate, setMinDate] = useState();\n    const [sum, setSum] = useState();\n    const [sum2, setSum2] = useState();\n\n    useEffect(() => {\n        if (data) {\n            const _data = kaspiData2(data);\n            setItems(_data.items);\n            setMaxDate(_data.maxDate);\n            setMinDate(_data.minDate);\n            setSum(_data.sum);\n            setSum2(_data.sum2);\n        }\n    }, [data]);\n\n    return (\n        <section>\n            <div className=\"mt-3 flex justify-between px-3 sm:px-0\">\n                <h1 className=\"text-white bg-red-500 py-2 px-3 rounded flex items-center\">\n                    Каспи выписка\n                </h1>\n                <div className=\"flex items-center justify-center\">\n                    <UploadButton dataExists={data && data.length} setData={setData}/>\n                </div>\n            </div>\n            <div className=\"space-y-2 mt-5\">\n                {items ? <Summary\n                    minDate={minDate}\n                    maxDate={maxDate}\n                    sum={sum}\n                    sum2={sum2}\n                    items={data}/> : ''}\n                {items ? <GroupListChart items={data}/> : ''}\n                {items ? <h2 className=\"font-bold text-3xl px-3 sm:px-0\">По группам</h2> : ''}\n                {items ? items.map(item => <GroupListItem key={item.name} item={item} setGroup={setGroup}/>) : ''}\n            </div>\n        </section>\n    );\n}\n","\nexport default function GroupItem({item}) {\n\n    console.log('GroupItem.js: render');\n\n    return (\n        <div\n            className={`border-t border-b sm:border-l sm:border-r sm:rounded bg-white px-3 py-2 flex justify-between ${item.sum.type === '+' ? ' text-green-500' : ''} `}\n        >\n            <div className=\"flex items-center justify-center\">\n                <div>\n                    <h3>{item.date.toLocaleDateString()}</h3>\n                </div>\n            </div>\n            <div className=\"flex flex-col justify-center\">\n                {item.sum.raw}\n            </div>\n        </div>\n    );\n}\n","import {useEffect, useRef} from 'react';\nimport * as echarts from 'echarts/core';\nimport { GridComponent } from 'echarts/components';\nimport { BarChart } from 'echarts/charts';\nimport { CanvasRenderer } from 'echarts/renderers';\n\necharts.use([GridComponent, BarChart, CanvasRenderer]);\n\nexport default function GroupItemChart({items}) {\n\n    console.log('GroupItemChart.js: render');\n\n    const ref = useRef();\n\n\n    useEffect(() => {\n        if (items && ref.current) {\n\n            let maxDate, minDate;\n            items.forEach(item => {\n\n                if (!maxDate || maxDate < item.date) {\n                    maxDate = item.date;\n                }\n                if (!minDate || minDate > item.date) {\n                    minDate = item.date;\n                }\n\n            })\n            const monthsList = [];\n\n            const _minDate = new Date(minDate);\n            _minDate.setDate(1);\n            const _maxDate = new Date(maxDate);\n            _maxDate.setDate(1);\n\n            for (; _minDate <= _maxDate; _minDate.setMonth(_minDate.getMonth() + 1)) {\n                monthsList.push(new Date(_minDate));\n            }\n\n            const chartX = [];\n\n            monthsList.forEach(date => {\n                chartX.push(date.toISOString().slice(0, 7));\n            })\n\n            const chartListPlus = [];\n            const chartListMinus = [];\n\n            chartX.forEach((date, index) => {\n                items.forEach(item => {\n                    if (date === item.date.toISOString().slice(0, 7)) {\n                        if (!chartListPlus[index]) {\n                            chartListPlus[index] = 0;\n                        }\n\n                        if (!chartListMinus[index]) {\n                            chartListMinus[index] = 0;\n                        }\n\n                        if (item.sum.type === '+') {\n                            chartListPlus[index] += item.sum.sum;\n                        }\n\n                        if (item.sum.type === '-') {\n                            chartListMinus[index] += item.sum.sum;\n                        }\n                    }\n                });\n            });\n\n            const chartListPlus2 = chartListPlus.map(item => {\n                return item === 0 ? '' : item.toFixed(2).replace('.00', '');\n            })\n            const chartListMinus2 = chartListMinus.map(item => {\n                return item === 0 ? '' : item.toFixed(2).replace('.00', '');\n            })\n\n            const series = [];\n\n            if (chartListMinus2.some(item => item)) {\n                series.push(\n                    {\n                        data: chartListMinus2,\n                        type: 'bar',\n                        label: {\n                            show: true,\n                            position: 'inside',\n                            rotate: 90,\n                        },\n                        showBackground: true,\n                        backgroundStyle: {\n                            color: 'rgba(180, 180, 180, 0.2)',\n                        },\n                        emphasis: {\n                            focus: 'series'\n                        },\n                    }\n                );\n            }\n\n            if (chartListPlus2.some(item => item)) {\n                series.push(\n                    {\n                        data: chartListPlus2,\n                        type: 'bar',\n                        label: {\n                            show: true,\n                            position: 'inside',\n                            rotate: 90,\n                        },\n\n                        showBackground: true,\n                        backgroundStyle: {\n                            color: 'rgba(180, 180, 180, 0.2)'\n                        },\n\n                        emphasis: {\n                            focus: 'series'\n                        },\n                    }\n                );\n            }\n\n            // Draw the chart\n            echarts.init(ref.current).setOption({\n                xAxis: {\n                    type: 'category',\n                    data: chartX,\n                    axisLabel: {interval: 0, rotate: 30}\n                },\n                yAxis: {\n                    type: 'value'\n                },\n                series\n            });\n        }\n\n        return () => {\n\n        }\n    }, [items]);\n\n    return (\n        <div className=\"-mt-8 px-3 sm:px-0 overflow-x-scroll\">\n            <div\n                ref={ref}\n                style={{height: '400px'}}/>\n        </div>\n    );\n};\n","import {useEffect} from \"react\";\n\nimport GroupItem from \"./GroupItem\";\nimport GroupItemChart from \"./GroupItemChart\";\n\nexport default function Group({group, resetGroup, items}) {\n\n    console.log('Group.js: render');\n\n    useEffect(() => {\n        const esc = e => {\n            if (e.keyCode === 27 || e.keyCode === 8) {\n                resetGroup();\n            }\n        }\n\n        document.addEventListener(\"keydown\", esc, false);\n        return () => {\n            document.removeEventListener(\"keydown\", esc, false);\n        }\n    }, [group, resetGroup]);\n\n    useEffect(() => {\n        if (group) {\n            document.body.style.overflow = 'hidden';\n            // document.body.style.position = 'relative';\n            // document.body.style.height = '100%';\n        }\n\n        return () => {\n            document.body.style.overflow = 'auto';\n            // document.body.style.position = 'unset';\n            // document.body.style.height = 'auto';\n        }\n    }, [group]);\n\n    if (!items || !group) {\n        return null;\n    }\n\n    return (\n        <div className=\"fixed bg-gray-100 overflow-y-auto z-10 inset-0\">\n            <div className=\"max-w-screen-sm mx-auto\">\n                <div className=\"mt-4\">\n                    <p className=\"px-3 sm:px-0\">\n                        <span\n                            className=\"bg-blue-500 hover:bg-blue-400 text-white px-3 py-2 rounded cursor-pointer\"\n                            onClick={resetGroup}>\n                            ← Показать все группы\n                        </span>\n                    </p>\n                    <div className=\"bg-gray-100 my-3 px-3 sm:px-0 mt-7\">\n                        <h3 className=\"font-bold text-4xl\">\n                            {group.name}\n                        </h3>\n                        {/*<p>*/}\n                        {/*    {group.sum}*/}\n                        {/*</p>*/}\n                        {/*<p>*/}\n                        {/*    +{group.sum2}*/}\n                        {/*</p>*/}\n                    </div>\n                    <GroupItemChart items={items}/>\n                    <section className=\"space-y-1 mb-5\">\n                        {items.map((item, index) => <GroupItem key={item.date.toLocaleString() + index} item={item}/>)}\n                    </section>\n                </div>\n            </div>\n        </div>\n    );\n}\n","import {useState} from \"react\";\n\nimport GroupList from \"./GroupList\";\nimport Group from \"./Group\";\n\nexport default function App() {\n    const [data, setData] = useState();\n    const [group, setGroup] = useState();\n\n    console.log('App.js: render');\n\n    return (\n        <main>\n            <GroupList\n                data={data}\n                setData={setData}\n                setGroup={setGroup}/>\n            <Group\n                group={group}\n                resetGroup={() => setGroup(null)}\n                items={data && group ? data.filter(item => item.descr === group.name) : []}/>\n            <div className=\"grid place-content-center h-96\">\n                <button\n                    type=\"button\"\n                    className=\"border bg-blue-500 hover:bg-blue-400 text-white py-6 px-14 rounded shadow\"\n                    onClick={() => document.dispatchEvent(new Event(\"open-upload-dialog\"))}\n                >\n                    {data ? 'Загрузить новую выписку' : 'Загрузить выписку'}\n                </button>\n            </div>\n        </main>\n    );\n}\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n    <React.StrictMode>\n        <App/>\n    </React.StrictMode>,\n    document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n\n// reportWebVitals(console.log);\nreportWebVitals();\n"],"sourceRoot":""}